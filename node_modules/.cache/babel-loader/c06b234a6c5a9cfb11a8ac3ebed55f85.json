{"ast":null,"code":"var _jsxFileName = \"E:\\\\Work-Files\\\\Maxffort\\\\Client-Projects\\\\HSST-Madhi-Consultancy\\\\Code\\\\dev\\\\edu-project\\\\live\\\\edu-app-admin\\\\src\\\\components\\\\InterviewDetailComponent\\\\AssignStudents.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Grid, Button, makeStyles, Dialog, DialogTitle, DialogContent, DialogActions } from '@material-ui/core';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport api from \"api/api\";\nimport { getCredentials } from \"services/authService\";\nimport StudentTable from \"components/tables/StudentTable\";\nimport SnackBar from \"components/SnackBar\";\nconst useStyles = makeStyles(theme => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff'\n  }\n}));\n\nconst AssignStudents = props => {\n  _s();\n\n  const classes = useStyles();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [open, setOpen] = useState(false);\n  const [message, setMesssage] = useState('');\n  const [severity, setSeverity] = useState('');\n  const students = useSelector(state => state.selectedStudents);\n  useEffect(() => {\n    console.log(\"called\");\n    remoteData();\n  }, []);\n\n  const assignStudents = async (students, examId) => {\n    try {\n      setLoading(true);\n      const res = await api.post('/admin/assignStudentsToInterview', {\n        students,\n        examId\n      }, {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${getCredentials()}`\n        }\n      }, {\n        timeout: 1000\n      });\n      setMesssage('Students successfully assigned');\n      setSeverity('success');\n      setOpen(true);\n      remoteData();\n      props.handleClose();\n    } catch (error) {\n      setLoading(false);\n      setMesssage('Student assignment failed');\n      setSeverity('error');\n      setOpen(true);\n      console.log(error);\n    }\n  };\n\n  const remoteData = async () => {\n    try {\n      setLoading(true);\n      const res = await api.post('/admin/getInterviewUnassignedStudents', {\n        examId: props.match.params.id\n      }, {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${getCredentials()}`\n        }\n      }, {\n        timeout: 1000\n      });\n      setData(res.data.response);\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      console.log(error);\n    }\n  };\n\n  const handleAssign = () => {\n    assignStudents(students.selected, props.match.params.id);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Dialog, {\n    open: props.open,\n    onClose: props.handleClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, \"Assign students\"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, loading && /*#__PURE__*/React.createElement(Backdrop, {\n    className: classes.backdrop,\n    open: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  })), open && /*#__PURE__*/React.createElement(SnackBar, {\n    open: open,\n    message: message,\n    severity: severity,\n    setOpen: setOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(StudentTable, {\n    history: props.history,\n    data: data,\n    remoteData: remoteData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: props.handleClose,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleAssign,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, \"Assign\"))));\n};\n\n_s(AssignStudents, \"6t4+BFZWt2KqpP+ssunfmRbg5u4=\", false, function () {\n  return [useStyles, useSelector];\n});\n\n_c = AssignStudents;\nexport default AssignStudents;\n\nvar _c;\n\n$RefreshReg$(_c, \"AssignStudents\");","map":{"version":3,"sources":["E:/Work-Files/Maxffort/Client-Projects/HSST-Madhi-Consultancy/Code/dev/edu-project/live/edu-app-admin/src/components/InterviewDetailComponent/AssignStudents.js"],"names":["React","useState","useEffect","Grid","Button","makeStyles","Dialog","DialogTitle","DialogContent","DialogActions","Backdrop","CircularProgress","useDispatch","useSelector","api","getCredentials","StudentTable","SnackBar","useStyles","theme","backdrop","zIndex","drawer","color","AssignStudents","props","classes","data","setData","loading","setLoading","open","setOpen","message","setMesssage","severity","setSeverity","students","state","selectedStudents","console","log","remoteData","assignStudents","examId","res","post","headers","Authorization","timeout","handleClose","error","match","params","id","response","handleAssign","selected","history"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Grid,\r\n    Button,\r\n    makeStyles,\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogContent,\r\n    DialogActions,\r\n} from '@material-ui/core';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport api from \"api/api\";\r\nimport { getCredentials } from \"services/authService\";\r\nimport StudentTable from \"components/tables/StudentTable\";\r\nimport SnackBar from \"components/SnackBar\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    }\r\n}));\r\n\r\nconst AssignStudents = (props) => {\r\n\r\n    const classes = useStyles();\r\n\r\n    const [data, setData] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [message, setMesssage] = useState('');\r\n    const [severity, setSeverity] = useState('');\r\n\r\n    const students = useSelector((state) => state.selectedStudents);\r\n\r\n    useEffect(() => {\r\n        console.log(\"called\")\r\n        remoteData();\r\n    }, []);\r\n\r\n    const assignStudents = async (students, examId) => {\r\n        try {\r\n            setLoading(true);\r\n            const res = await api.post(\r\n                '/admin/assignStudentsToInterview',\r\n                { students, examId },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        Authorization: `Bearer ${getCredentials()}`,\r\n                    },\r\n                },\r\n                { timeout: 1000 }\r\n            );\r\n            setMesssage('Students successfully assigned');\r\n            setSeverity('success');\r\n            setOpen(true);\r\n            remoteData();\r\n            props.handleClose()\r\n        } catch (error) {\r\n            setLoading(false);\r\n            setMesssage('Student assignment failed');\r\n            setSeverity('error');\r\n            setOpen(true);\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const remoteData = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const res = await api.post(\r\n                '/admin/getInterviewUnassignedStudents',\r\n                { examId: props.match.params.id },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        Authorization: `Bearer ${getCredentials()}`,\r\n                    },\r\n                },\r\n                { timeout: 1000 }\r\n            );\r\n\r\n            setData(res.data.response);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            setLoading(false);\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const handleAssign = () => {\r\n        assignStudents(students.selected, props.match.params.id);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Dialog open={props.open} onClose={props.handleClose} aria-labelledby=\"form-dialog-title\">\r\n                <DialogTitle id=\"form-dialog-title\">Assign students</DialogTitle>\r\n                <DialogContent>\r\n                    {loading && (\r\n                        <Backdrop className={classes.backdrop} open={loading} >\r\n                            <CircularProgress color=\"primary\" />\r\n                        </Backdrop>\r\n                    )}\r\n                    {open && (\r\n                        <SnackBar open={open} message={message} severity={severity} setOpen={setOpen} />\r\n                    )}\r\n                    \r\n                    <StudentTable history={props.history} data={data} remoteData={remoteData} />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={props.handleClose} color=\"primary\">\r\n                        Cancel\r\n          </Button>\r\n                    <Button onClick={handleAssign} color=\"primary\">\r\n                        Assign\r\n          </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AssignStudents;"]},"metadata":{},"sourceType":"module"}