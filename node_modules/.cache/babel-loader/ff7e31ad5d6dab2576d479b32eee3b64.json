{"ast":null,"code":"var _jsxFileName = \"E:\\\\Work-Files\\\\Maxffort\\\\Client-Projects\\\\HSST-Madhi-Consultancy\\\\Code\\\\dev\\\\edu-project\\\\live\\\\edu-app-admin\\\\src\\\\pages\\\\ResetPassword\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { Link } from \"react-router-dom\";\nimport Box from \"@material-ui/core/Box\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { useFormik } from \"formik\";\nimport Alert from '@material-ui/lab/Alert';\nimport AdornedButton from \"../../components/buttons/AdornedButton\";\nimport * as yup from \"yup\";\nimport { updatePassword } from '../../services/authService';\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: \"100%\",\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n    height: \"32px\"\n  }\n}));\n\nfunction Copyright() {\n  return /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, \"Copyright © \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, \"BestEnlist portal\"), \" \", new Date().getFullYear(), \".\");\n}\n\n_c = Copyright;\nexport default function ResetPassword(props) {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [st, setSt] = useState(0);\n  const classes = useStyles();\n  const formik = useFormik({\n    initialValues: {\n      pass: \"\",\n      pass2: \"\"\n    },\n    validationSchema: yup.object({\n      pass: yup.string().required(\"Password must contain at least 8 characters, one uppercase, one number and one special case character\").matches(/^.*(?=.{8,})((?=.*[!@#$%^&*()\\-_=+{};:,<.>]){1})(?=.*\\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/, \"Password must contain at least 8 characters, one uppercase, one number and one special case character\"),\n      pass2: yup.string().required(\"This feild is required\").oneOf([yup.ref(\"pass\"), null], \"Password mismatch\")\n    }),\n    onSubmit: values => {\n      setLoading(true);\n      setSt(0);\n      updatePassword(props.match.params.token, values.pass).then(val => setSt(val));\n    }\n  });\n  useEffect(() => {\n    console.log(props.match.params.token);\n    if (st === 200) props.history.replace(\"/\");\n\n    if (st > 0) {\n      setLoading(false);\n      formik.values.pass = \"\";\n      formik.values.pass2 = \"\";\n    }\n  }, [st]);\n\n  const goToSignup = () => {\n    props.history.push(\"/signup\");\n  };\n\n  const goToLogin = () => {\n    props.history.push(\"/signin\");\n  };\n\n  const [passwordShown, setPasswordShown] = useState(false);\n\n  const togglePasswordVisiblity = () => {\n    setPasswordShown(passwordShown ? false : true);\n  };\n\n  const onSubmit = e => {\n    console.log(e);\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: classes.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LockOutlinedIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, \"Password reset\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    noValidate: true,\n    onSubmit: formik.handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    className: st === 0 || st === 200 ? \"d-none\" : \"\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  }, \"Password reset failed\"), /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    autoFocus: true,\n    onChange: formik.handleChange,\n    value: formik.values.pass,\n    name: \"pass\",\n    label: \"Password\",\n    type: passwordShown ? \"text\" : \"password\",\n    helperText: formik.errors.pass,\n    id: \"password\",\n    error: formik.touched.pass && formik.errors.pass,\n    InputProps: {\n      endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"end\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        \"aria-label\": \"toggle password visibility\",\n        onClick: togglePasswordVisiblity,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 19\n        }\n      }, passwordShown ? /*#__PURE__*/React.createElement(Visibility, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 38\n        }\n      }) : /*#__PURE__*/React.createElement(VisibilityOff, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 55\n        }\n      })))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    type: passwordShown ? \"text\" : \"password\",\n    fullWidth: true,\n    error: formik.touched.pass2 && formik.errors.pass2,\n    onChange: formik.handleChange,\n    value: formik.values.pass2,\n    helperText: formik.errors.pass2,\n    id: \"pass2\",\n    label: \"Confirm pasword\",\n    name: \"pass2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(AdornedButton, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: loading,\n    color: loading ? \"secondary\" : \"primary\" // disabled={loading}\n    ,\n    loading: loading,\n    className: classes.submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 8\n    }\n  }, \"Reset\"))), /*#__PURE__*/React.createElement(Box, {\n    mt: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Copyright, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  })));\n}\n\n_s(ResetPassword, \"fgLsuTmPpqe+7AwM/7UDxDJp1xk=\", false, function () {\n  return [useStyles, useFormik];\n});\n\n_c2 = ResetPassword;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Copyright\");\n$RefreshReg$(_c2, \"ResetPassword\");","map":{"version":3,"sources":["E:/Work-Files/Maxffort/Client-Projects/HSST-Madhi-Consultancy/Code/dev/edu-project/live/edu-app-admin/src/pages/ResetPassword/index.js"],"names":["React","useEffect","useState","Avatar","Button","CssBaseline","TextField","Link","Box","LockOutlinedIcon","Typography","makeStyles","Container","InputAdornment","Visibility","VisibilityOff","IconButton","useFormik","Alert","AdornedButton","yup","updatePassword","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","height","Copyright","Date","getFullYear","ResetPassword","props","loading","setLoading","st","setSt","classes","formik","initialValues","pass","pass2","validationSchema","object","string","required","matches","oneOf","ref","onSubmit","values","match","params","token","then","val","console","log","history","replace","goToSignup","push","goToLogin","passwordShown","setPasswordShown","togglePasswordVisiblity","e","handleSubmit","handleChange","errors","touched","endAdornment"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { useFormik } from \"formik\";\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport AdornedButton from \"../../components/buttons/AdornedButton\";\r\n\r\nimport * as yup from \"yup\";\r\n\r\nimport {updatePassword} from '../../services/authService'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n    height:\"32px\"\r\n  },\r\n}));\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright © \"}\r\n      <Link to=\"/\">\r\n        BestEnlist portal\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\nexport default function ResetPassword(props) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [st, setSt] = useState(0);\r\n\r\n  const classes = useStyles();\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      pass: \"\",\r\n      pass2: \"\",\r\n    },\r\n    validationSchema: yup.object({\r\n        pass: yup\r\n        .string()\r\n        .required(\"Password must contain at least 8 characters, one uppercase, one number and one special case character\")\r\n        .matches(\r\n          /^.*(?=.{8,})((?=.*[!@#$%^&*()\\-_=+{};:,<.>]){1})(?=.*\\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,\r\n          \"Password must contain at least 8 characters, one uppercase, one number and one special case character\"\r\n        ),\r\n      pass2: yup\r\n        .string()\r\n        .required(\"This feild is required\")\r\n        .oneOf([yup.ref(\"pass\"), null], \"Password mismatch\"),\r\n    }),\r\n    onSubmit: (values) => {\r\n        setLoading(true);\r\n        setSt(0)\r\n        updatePassword(props.match.params.token,values.pass).then((val)=>setSt(val))\r\n    },\r\n  });\r\nuseEffect(() => {\r\n\r\n    console.log(props.match.params.token);\r\n    if(st===200)\r\n        props.history.replace(\"/\")\r\n    if(st>0){\r\n    setLoading(false)\r\n    formik.values.pass=\"\"\r\n    formik.values.pass2=\"\"\r\n}\r\n\r\n}, [st])\r\n  const goToSignup = () => {\r\n    props.history.push(\"/signup\");\r\n  };\r\n  const goToLogin = () => {\r\n    props.history.push(\"/signin\");\r\n  };\r\n  const [passwordShown, setPasswordShown] = useState(false);\r\n  const togglePasswordVisiblity = () => {\r\n    setPasswordShown(passwordShown ? false : true);\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    console.log(e);\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      {/* <SimpleHeader goToLogin={goToLogin} goToSignup={goToSignup} loc=\"pr\" /> */}\r\n\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Password reset\r\n        </Typography>\r\n        <form\r\n          className={classes.form}\r\n          noValidate\r\n          onSubmit={formik.handleSubmit}\r\n        >\r\n              <Alert className={(st===0||st===200)?\"d-none\":\"\"} severity=\"error\">Password reset failed</Alert>\r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            autoFocus\r\n            onChange={formik.handleChange}\r\n            value={formik.values.pass}\r\n            name=\"pass\"\r\n            label=\"Password\"\r\n            type={passwordShown ? \"text\" : \"password\"}\r\n            helperText={formik.errors.pass}\r\n            id=\"password\"\r\n            error={formik.touched.pass && formik.errors.pass }\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={togglePasswordVisiblity}\r\n                  >\r\n                    {passwordShown ? <Visibility /> : <VisibilityOff />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            type={passwordShown ? \"text\" : \"password\"}\r\n            fullWidth\r\n            error={formik.touched.pass2 && formik.errors.pass2 }\r\n            onChange={formik.handleChange}\r\n            value={formik.values.pass2}\r\n            helperText={formik.errors.pass2}\r\n            id=\"pass2\"\r\n            label=\"Confirm pasword\"\r\n            name=\"pass2\"\r\n          />\r\n       <AdornedButton\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={loading}\r\n              color={loading ? \"secondary\" : \"primary\"}\r\n              // disabled={loading}\r\n              loading={loading}\r\n              className={classes.submit}\r\n            >\r\n              Reset\r\n            </AdornedButton>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}