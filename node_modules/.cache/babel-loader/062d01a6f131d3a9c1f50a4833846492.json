{"ast":null,"code":"var _jsxFileName = \"E:\\\\Work-Files\\\\Maxffort\\\\Client-Projects\\\\HSST-Madhi-Consultancy\\\\Code\\\\dev\\\\edu-project\\\\live\\\\edu-app-admin\\\\src\\\\pages\\\\DashboardPage\\\\Users\\\\AddUser\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport AddUserComponent from '../../../../components/AddUserComponent';\nimport api from '../../../../api/api';\nimport { getCredentials } from '../../../../services/authService';\nimport SnackBar from 'components/SnackBar';\nexport default function AddUser({\n  history\n}) {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState('');\n  const [open, setOpen] = useState(false);\n\n  const createUser = async values => {\n    const {\n      email,\n      name,\n      password,\n      role,\n      organization\n    } = values;\n    setLoading(true);\n    console.log('values dd', values);\n\n    try {\n      const data = await api.post('/admin/createAdminUser', {\n        email,\n        username: name,\n        name: organization,\n        password,\n        role\n      }, {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${getCredentials()}`\n        }\n      }, {\n        timeout: 1000\n      });\n      console.log(data);\n      setLoading(false);\n      history.goBack();\n      setOpen(false);\n    } catch (error) {\n      console.log(error.error, 'coo');\n      setLoading(false);\n      setOpen(true);\n      setErr(\"Unable to create user\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SnackBar, {\n    open: open,\n    message: err,\n    setOpen: setOpen,\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(AddUserComponent, {\n    onSubmitClicked: createUser,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  }));\n}\n\n_s(AddUser, \"I7F8dKifMb6v0UjjTC+riJt9f2w=\");\n\n_c = AddUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddUser\");","map":{"version":3,"sources":["E:/Work-Files/Maxffort/Client-Projects/HSST-Madhi-Consultancy/Code/dev/edu-project/live/edu-app-admin/src/pages/DashboardPage/Users/AddUser/index.js"],"names":["React","useState","AddUserComponent","api","getCredentials","SnackBar","AddUser","history","loading","setLoading","err","setErr","open","setOpen","createUser","values","email","name","password","role","organization","console","log","data","post","username","headers","Authorization","timeout","goBack","error"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,gBAAP,MAA6B,yCAA7B;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,SAASC,cAAT,QAA+B,kCAA/B;AACA,OAAOC,QAAP,MAAqB,qBAArB;AAEA,eAAe,SAASC,OAAT,CAAiB;AAAEC,EAAAA;AAAF,CAAjB,EAA8B;AAAA;;AACzC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACS,GAAD,EAAMC,MAAN,IAAgBV,QAAQ,CAAC,EAAD,CAA9B;AACA,QAAM,CAACW,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,KAAD,CAAhC;;AACA,QAAMa,UAAU,GAAG,MAAOC,MAAP,IAAkB;AACjC,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA,IAAT;AAAeC,MAAAA,QAAf;AAAyBC,MAAAA,IAAzB;AAA+BC,MAAAA;AAA/B,QAAgDL,MAAtD;AAEAN,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAY,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBP,MAAzB;;AACA,QAAI;AACA,YAAMQ,IAAI,GAAG,MAAMpB,GAAG,CAACqB,IAAJ,CACf,wBADe,EAEf;AAAER,QAAAA,KAAF;AAASS,QAAAA,QAAQ,EAAER,IAAnB;AAAyBA,QAAAA,IAAI,EAAEG,YAA/B;AAA6CF,QAAAA,QAA7C;AAAuDC,QAAAA;AAAvD,OAFe,EAGf;AACIO,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAELC,UAAAA,aAAa,EAAG,UAASvB,cAAc,EAAG;AAFrC;AADb,OAHe,EASf;AAAEwB,QAAAA,OAAO,EAAE;AAAX,OATe,CAAnB;AAWAP,MAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACAd,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,MAAAA,OAAO,CAACsB,MAAR;AACAhB,MAAAA,OAAO,CAAC,KAAD,CAAP;AACH,KAhBD,CAgBE,OAAOiB,KAAP,EAAc;AACZT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,KAAK,CAACA,KAAlB,EAAyB,KAAzB;AACArB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAI,MAAAA,OAAO,CAAC,IAAD,CAAP;AACAF,MAAAA,MAAM,CAAC,uBAAD,CAAN;AACH;AACJ,GA3BD;;AA6BA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAEC,IAAhB;AAAsB,IAAA,OAAO,EAAEF,GAA/B;AAAoC,IAAA,OAAO,EAAEG,OAA7C;AAAsD,IAAA,QAAQ,EAAC,OAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,gBAAD;AAAkB,IAAA,eAAe,EAAEC,UAAnC;AAA+C,IAAA,OAAO,EAAEN,OAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ;AAMH;;GAvCuBF,O;;KAAAA,O","sourcesContent":["import React, { useState } from 'react';\r\nimport AddUserComponent from '../../../../components/AddUserComponent';\r\nimport api from '../../../../api/api';\r\nimport { getCredentials } from '../../../../services/authService';\r\nimport SnackBar from 'components/SnackBar';\r\n\r\nexport default function AddUser({ history }) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [err, setErr] = useState('')\r\n    const [open, setOpen] = useState(false)\r\n    const createUser = async (values) => {\r\n        const { email, name, password, role, organization } = values;\r\n\r\n        setLoading(true);\r\n        console.log('values dd', values);\r\n        try {\r\n            const data = await api.post(\r\n                '/admin/createAdminUser',\r\n                { email, username: name, name: organization, password, role },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        Authorization: `Bearer ${getCredentials()}`,\r\n                    },\r\n                },\r\n                { timeout: 1000 }\r\n            );\r\n            console.log(data);\r\n            setLoading(false);\r\n            history.goBack();\r\n            setOpen(false)\r\n        } catch (error) {\r\n            console.log(error.error, 'coo');\r\n            setLoading(false);\r\n            setOpen(true)\r\n            setErr(\"Unable to create user\")\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <SnackBar open={open} message={err} setOpen={setOpen} severity='error' />\r\n            <AddUserComponent onSubmitClicked={createUser} loading={loading} />\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}